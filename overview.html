
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PyAMA Overview &#8212; PyAMA 0.1.8 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="PyAMA’s documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-pyama.listener">
<span id="pyama-overview"></span><h1>PyAMA Overview<a class="headerlink" href="#module-pyama.listener" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="pyama.listener.Listeners">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">pyama.listener.</span></code><code class="sig-name descname"><span class="pre">Listeners</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kinds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.listener.Listeners" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Listener notification class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kinds</strong> (<em>None</em><em>, </em><em>str</em><em> or </em><em>iterable of str</em>) – different event categories offered by this Listeners instance</p></li>
<li><p><strong>require_queue</strong> (<em>bool</em>) – Force listeners to pass a queue at registering</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="pyama.listener.Listeners.clear">
<code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyama.listener.Listeners.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all listeners</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.listener.Listeners.delete">
<code class="sig-name descname"><span class="pre">delete</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.listener.Listeners.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the listener with ID <code class="docutils literal notranslate"><span class="pre">lid</span></code>, if existing.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.listener.Listeners.kinds">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">kinds</span></code><a class="headerlink" href="#pyama.listener.Listeners.kinds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.listener.Listeners.notify">
<code class="sig-name descname"><span class="pre">notify</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.listener.Listeners.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify the listeners.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">kind</span> <span class="pre">is</span> <span class="pre">None</span></code>, all listeners are notified.
Else, only the listeners registered for event kind <code class="docutils literal notranslate"><span class="pre">kind</span></code> are notified.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.listener.Listeners.register">
<code class="sig-name descname"><span class="pre">register</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.listener.Listeners.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a listener that will be notified on changes.</p>
<p>Listeners can be registered to listen to all kinds of events or only to certain kinds.
The kinds should be strings.
When kind is None, fun will be called by all of these events.</p>
<p>If a queue is passed, an Event will be fed into the queue, including
<code class="docutils literal notranslate"><span class="pre">fun</span></code> and any arguments passed at notifying.
If no queue is passed, <code class="docutils literal notranslate"><span class="pre">fun</span></code> will be called directly by the notifying thread.</p>
<p>A listener ID is returned that can be used to delete the listener.
If the registration was not successful, None is returned.</p>
<p>Note that if <code class="docutils literal notranslate"><span class="pre">fun</span></code> raises an exception, the corresponding listener will not be called anymore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fun</strong> (<em>function handle</em>) – The function to be called on change, will be called without parameters</p></li>
<li><p><strong>kind</strong> (<em>None</em><em>, </em><em>str</em><em> or </em><em>iterable containing strings</em>) – The kind of events when the function will be called</p></li>
<li><p><strong>queue</strong> (<em>None</em><em> or </em><em>Queue</em>) – Queue object to feed an event as notification</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a listener ID or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str or None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-pyama.stack.base"></span><dl class="py class">
<dt id="pyama.stack.base.BaseStack">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">pyama.stack.base.</span></code><code class="sig-name descname"><span class="pre">BaseStack</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">virtual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listeners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listeners_kinds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listeners_opt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for stacks.</p>
<p>This class provides basic stack functionality that may be used by subclasses.
This class not intended for direct instantiation, but only for subclassing.</p>
<dl>
<dt>Implementing classes should provide this API:</dt><dd><ul class="simple">
<li><p>A numpy array of one frame can be obtained by the <cite>get_image</cite> method.</p></li>
<li><p>If the shape of the stack may be changed, the <cite>reshape</cite> method should
be used. Upon reshape, the listeners should be notified.
Else, <cite>reshape</cite> should throw a NotImplementedError.</p></li>
<li><p>If the stack corresponds to a file, the path should be accessible
under <cite>_path</cite>.</p></li>
<li><p>If the stack is a virtual stack (frames are calculated just in time
when <cite>get_image</cite> is called), the constructor of this class should be
called with <cite>virtual=True</cite>.</p></li>
<li><p>If an implementing class has special requirements for listeners
(e.g. require queue, enforce other Listeners implementaiton), an existing
Listeners instance should be passed via the <cite>listeners</cite> keyword or Listeners
options should be passed via the <cite>listeners_opt</cite> keyword of the constructor.
The Listeners must at least have the kinds ‘reshape’ and ‘close’.
If only more listener kinds are required, the additional kinds can be
passed via the <cite>listeners_kinds</cite> keyword argument.</p></li>
</ul>
</dd>
<dt>This class fires these event kinds with a dict as keyword argument ‘message’:</dt><dd><ul>
<li><dl class="simple">
<dt>Event ‘const.EVT_RESHAPE’ with ‘message’ containing these fields:</dt><dd><ul class="simple">
<li><p>‘event’: const.EVT_RESHAPE</p></li>
<li><p>‘id’: ID of the calling stack</p></li>
<li><p>‘old’: an OrderedDict of the previous shape</p></li>
<li><p>‘new’: an OrderedDict of the newly established shape</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Event ‘const.EVT_CLOSE’ with ‘message’ containing these fields:</dt><dd><ul class="simple">
<li><p>‘event’: const.EVT_CLOSE</p></li>
<li><p>‘id’: ID of the calling stack</p></li>
</ul>
</dd>
</dl>
<p>A stack emitting this event is being closed and should not send any
events after this event has been sent.
Listeners may/should clean up references to the stack upon this event.</p>
</li>
</ul>
</dd>
</dl>
<p>Additionally, all events contain the keyword argument ‘stack_id’ holding the
ID of this stack, which can also be retrieved with the ‘id’ property.</p>
<dl class="py method">
<dt id="pyama.stack.base.BaseStack.add_listener">
<code class="sig-name descname"><span class="pre">add_listener</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.add_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a listener to stack changes.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.close">
<code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the TIFF file.</p>
<p>This method may be implemented/overwritten by a subclass.
Closing a stack should always fire a ‘const.EVT_CLOSE’ event
to its listeners to allow for cleanup.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.delete_listener">
<code class="sig-name descname"><span class="pre">delete_listener</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.delete_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Un-register a listener.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.dtype">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">dtype</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.get_image">
<code class="sig-name descname"><span class="pre">get_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.get_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a numpy array of a stack position.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.get_linear_index">
<code class="sig-name descname"><span class="pre">get_linear_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.get_linear_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get index of an image in a linear sequence of images.</p>
<p>Indices are zero-based.
All indices of existing dimensions are required.
Slicing is not supported.</p>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.height">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">height</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.height" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.id">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">id</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.is_virtual">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">is_virtual</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.is_virtual" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.n_channels">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_channels</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.n_channels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.n_frames">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_frames</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.n_frames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.n_images">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_images</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.n_images" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.n_samples">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_samples</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.n_samples" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.n_slices">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">n_slices</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.n_slices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.path">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.reshape">
<code class="sig-name descname"><span class="pre">reshape</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyama.stack.base.BaseStack.reshape" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape the stack.</p>
<p>The new shape must be passed as a dict-like object with preserved order.</p>
<p>When reshaping is finished, listeners of the event const.EVT_RESHAPE are
notified with the keyword argument ‘message’ holding a namedtuple with fields:</p>
<blockquote>
<div><p>‘event’: const.EVT_RESHAPE
‘old’: OrderedDict of shape before reshape
‘new’: OrderedDict of shape after reshape</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.shape">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">shape</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.shape_dict">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">shape_dict</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.shape_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyama.stack.base.BaseStack.width">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">width</span></code><a class="headerlink" href="#pyama.stack.base.BaseStack.width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PyAMA</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">PyAMA Overview</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">PyAMA’s documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Daniel Woschée.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>